【Gin Context 常用方法速查（c *gin.Context）】

一、返回响应相关
1. JSON
   - 用法：c.JSON(statusCode, data)
   - 作用：设置状态码 + Content-Type: application/json，并把 data 序列化为 JSON 返回。
   - 典型业务场景：
     - 标准 RESTful 接口返回数据（列表、详情等）
     - 创建资源成功时返回 201 + 新建对象
     - 出错时返回错误信息 JSON（如 {"error": "..."}）
   - 示例：c.JSON(http.StatusOK, gin.H{"message": "ok"})

2. Status
   - 用法：c.Status(statusCode)
   - 作用：只设置 HTTP 状态码，不写响应体。
   - 典型业务场景：
     - DELETE 成功返回 204 No Content
     - 某些只关心状态码、不需要响应体的内部接口
     - 手动用 c.Writer 写响应体时，先单独设置状态码

3. String
   - 用法：c.String(statusCode, "text %s", value)
   - 作用：返回纯文本，Content-Type: text/plain。
   - 典型业务场景：
     - 简单健康检查（/ping 返回 "pong"）
     - 临时调试接口
     - 非 JSON 的简单响应

4. Data
   - 用法：c.Data(statusCode, contentType, []byte)
   - 作用：返回原始字节数据，手动指定 Content-Type。
   - 典型业务场景：
     - 返回文件内容（如导出文件、图片）
     - 反向代理某些二进制响应
     - 需要精确控制响应体格式时

5. XML / YAML / ProtoBuf 等
   - 用法：c.XML(...) / c.YAML(...) / c.ProtoBuf(...)
   - 作用：类似 JSON，只是换了序列化格式。
   - 典型业务场景：
     - 与需要 XML/YAML/ProtoBuf 的外部系统对接
     - 为内部服务提供非 JSON 协议的接口

二、请求体绑定（解析 JSON / 表单）
1. ShouldBindJSON
   - 用法：err := c.ShouldBindJSON(&obj)
   - 作用：从请求体读取 JSON，按字段绑定到结构体指针；出错时返回 error，不自动写响应。
   - 适合：
     - 你想自己控制错误返回内容和状态码
     - 需要根据不同错误类型返回不同提示
   - 典型业务场景：
     - 常规 RESTful 接口（POST/PUT/PATCH）接收 JSON 请求体
     - 校验失败时返回 400 + 自定义错误信息

2. BindJSON
   - 用法：err := c.BindJSON(&obj)
   - 作用：功能类似 ShouldBindJSON，但出错时会自动写 400 响应并中止后续处理。
   - 一般推荐使用 ShouldBindJSON，更灵活。
   - 典型业务场景：
     - 简单内部接口，对错误处理要求不高
     - 原型/脚手架阶段，先图省事

3. ShouldBind / Bind（通用绑定）
   - 用法：c.ShouldBind(&obj)
   - 作用：根据 Content-Type 自动选择 JSON / 表单等方式绑定。
   - 典型业务场景：
     - 同一个接口既可能接收 JSON，也可能接收表单
     - 需要兼容多种客户端（浏览器表单、移动端等）

三、获取路径参数 / 查询参数 / 表单
1. Param
   - 用法：c.Param("id")
   - 作用：获取路径参数，如 /books/:id 中的 id。
   - 典型业务场景：
     - RESTful 资源 ID：/books/:id、/students/:id/books
     - 操作动作：/users/:id/activate 等

2. Query
   - 用法：c.Query("name")
   - 作用：获取 URL 查询参数，如 /books?name=xxx。
   - 如果不存在，返回空字符串。
   - 典型业务场景：
     - 列表过滤：/books?author=xxx
     - 搜索关键词：/search?q=keyword
     - 可选参数，不传就当空字符串

3. DefaultQuery
   - 用法：c.DefaultQuery("page", "1")
   - 作用：查询参数不存在时，返回指定的默认值。
   - 典型业务场景：
     - 分页参数：page、page_size
     - 排序参数：sort（默认按时间倒序）

4. PostForm
   - 用法：c.PostForm("field")
   - 作用：获取 POST 表单字段。
   - 典型业务场景：
     - 传统表单提交（Content-Type: application/x-www-form-urlencoded）
     - 后台管理页面的表单接口

四、Header 与设置值
1. GetHeader
   - 用法：c.GetHeader("Authorization")
   - 作用：读取请求头中的某个字段。
   - 典型业务场景：
     - 获取认证信息（Authorization: Bearer <token>）
     - 获取自定义请求头（如 X-Request-ID）

2. Header
   - 用法：c.Header("X-Custom", "value")
   - 作用：在响应中设置 Header。
   - 典型业务场景：
     - 设置分页信息（X-Total-Count、X-Page 等）
     - 设置跨域相关头（在中间件中更常见）
     - 设置自定义追踪 ID 等

3. Set / Get / MustGet
   - 用法：
     - c.Set("userID", 123)
     - v, exists := c.Get("userID")
     - v := c.MustGet("userID")
   - 作用：在当前请求的 Context 中存储和读取数据（常用于中间件传值）。
   - 典型业务场景：
     - 认证中间件解析 token 后，把 userID 放进去，后续 handler 直接取用
     - 在多个中间件之间传递一些计算结果，避免重复计算

五、控制请求流程
1. Next
   - 用法：c.Next()
   - 作用：在中间件中调用下一个处理函数。
   - 典型业务场景：
     - 记录请求耗时：在 Next 前后打时间点
     - 统一日志中间件：Next 前后打印请求和响应信息

2. Abort
   - 用法：c.Abort()
   - 作用：阻止调用链继续往后执行后续处理函数。
   - 典型业务场景：
     - 中间件发现请求不合法，但不需要立刻写响应（不常见，一般用 AbortWithStatus）

3. AbortWithStatus / AbortWithStatusJSON
   - 用法：
     - c.AbortWithStatus(http.StatusUnauthorized)
     - c.AbortWithStatusJSON(http.StatusUnauthorized, gin.H{"error": "unauthorized"})
   - 作用：写入响应并终止后续处理（常用于认证/鉴权中间件）。
   - 典型业务场景：
     - 认证失败：中间件里直接返回 401，并终止后续 handler
     - 权限不足：返回 403，并终止后续处理
     - 请求频率过高：限流中间件直接返回 429 Too Many Requests
